![TBZ Logo](../x_gitres/tbz_logo.png)


[TOC]

# KN08: FaaS und Backup

Beachten Sie die [allgemeinen Informationen zu den Abgaben](https://gitlab.com/ch-tbz-it/Stud/m346/m346/-/blob/main/Abgaben.md).

In dieser Kompetenz geht es darum, dass Sie mit Serverless Funktionen arbeiten (FaaS) und dabei auch praktische Wartungsarbeit umsetzen.

## Lernziele

- Sie arbeiten mit Serverless Funktionen arbeiten (FaaS) und setzen dabei auch praktische Wartungsarbeit um.



## A) Backup-Skript (70%)

[Im GIT für die Lernenden finden Sie zwei Skripte](https://gitlab.com/ch-tbz-it/Stud/m346/m346/-/blob/main/KN08/Readme.md) für ein Backup und anschliessendes Cleanup mit Anleitung was die Skripte ausführen. Sie müssen das Skript nicht im Detail verstehen, sondern grundsätzlich einfach anwenden. Die beiden Skripte verwenden das [Python-Modul boto3 als SDK](https://pypi.org/project/boto3/) für AWS Zugriff.

Sie verwenden AWS Lambda (FaaS/Serverless) um diese Skripte auszuführen.

**Tasks**:

- Erstellen Sie eine neue Lambda-Funktion und führen Sie das Backup-Skript aus. Sie sollen das Backup für mindestens 2 Server erstellen. Falls Sie die Umgebung aus *KN06* noch haben, können Sie den Tag gleich im Template für den Autoscaler hinzufügen. 
- Erstellen Sie eine neue Lambda-Funktion und führen Sie das cleanup-Skript aus. Ändern Sie vorher das Datum in **einem** der beiden Server, so dass nur ein Backup gelöscht wird. Ihr Autoskalierer wird ja automatisch eine neue Instanz hochfahren.

**Sie werden sicherlich auf ein Widerstände treffen. Lösen Sie diese.**

**Abgabe**:

- Zeigen Sie den Screenshot ihrer Instanzen mit dem korrekten Tag
- Zeigen Sie einen Screenshot der Liste der erstellten Snapshots.
- Zeigen Sie einen Screenshot der Tags eines der erstellten Snapshots.
- Zeigen Sie einen Screenshot der Liste nachdem Sie das Cleanup ausgeführt haben.



## B) CRON-Job (30%)

Sie möchten Die Skripte natürlich nicht manuell ausführen, sondern automatisch. Finden Sie heraus wie Sie dies bewerkstelligen und setzen Sie es um. Es gibt zwei Wege, über den Scheduler oder über eine Verknüpfung direkt mit der Lambda Funktion.
